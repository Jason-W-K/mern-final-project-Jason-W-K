{"ast":null,"code":"import{useState,useEffect}from'react';import axios from'axios';import{io}from'socket.io-client';import AppointmentCard from'../components/AppointmentCard';import NewAppointmentForm from'../components/NewAppointmentForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AppointmentsPage(){const[appointments,setAppointments]=useState([]);const[filter,setFilter]=useState('All');const[searchTerm,setSearchTerm]=useState('');const[loading,setLoading]=useState(true);// Load appointments from backend\nuseEffect(()=>{axios.get('http://localhost:5000/api/appointments').then(res=>setAppointments(res.data)).catch(err=>console.error('Fetch error:',err)).finally(()=>setLoading(false));},[]);// Listen for real-time updates\nuseEffect(()=>{const socket=io('http://localhost:5000');socket.on('appointmentAdded',newAppt=>{setAppointments(prev=>[...prev,newAppt]);});socket.on('appointmentCancelled',updatedAppt=>{setAppointments(prev=>prev.map(appt=>appt._id===updatedAppt._id?updatedAppt:appt));});return()=>socket.disconnect();},[]);const addAppointment=newAppt=>{axios.post('http://localhost:5000/api/appointments',newAppt).then(res=>setAppointments(prev=>[...prev,res.data])).catch(err=>console.error('Add error:',err));};const cancelAppointment=id=>{axios.patch(\"http://localhost:5000/api/appointments/\".concat(id,\"/cancel\")).then(res=>{setAppointments(prev=>prev.map(appt=>appt._id===id?res.data:appt));}).catch(err=>console.error('Cancel error:',err));};const filteredAppointments=appointments.filter(appt=>(filter==='All'||appt.status===filter)&&appt.patient.toLowerCase().includes(searchTerm.toLowerCase())).sort((a,b)=>{const dateA=new Date(\"\".concat(a.date,\"T\").concat(a.time));const dateB=new Date(\"\".concat(b.date,\"T\").concat(b.time));return dateA-dateB;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Appointments\"}),/*#__PURE__*/_jsx(NewAppointmentForm,{onAdd:addAppointment}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Search by patient name: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"e.g. Jane Doe\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Filter by status: \"}),/*#__PURE__*/_jsxs(\"select\",{value:filter,onChange:e=>setFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Confirmed\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Cancelled\"})]})]}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading appointments...\"}):filteredAppointments.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No appointments found.\"}):filteredAppointments.map(appt=>/*#__PURE__*/_jsx(AppointmentCard,{patient:appt.patient,date:appt.date,time:appt.time,status:appt.status,onCancel:()=>cancelAppointment(appt._id)},appt._id))]});}","map":{"version":3,"names":["useState","useEffect","axios","io","AppointmentCard","NewAppointmentForm","jsx","_jsx","jsxs","_jsxs","AppointmentsPage","appointments","setAppointments","filter","setFilter","searchTerm","setSearchTerm","loading","setLoading","get","then","res","data","catch","err","console","error","finally","socket","on","newAppt","prev","updatedAppt","map","appt","_id","disconnect","addAppointment","post","cancelAppointment","id","patch","concat","filteredAppointments","status","patient","toLowerCase","includes","sort","a","b","dateA","Date","date","time","dateB","children","onAdd","style","marginBottom","type","value","onChange","e","target","placeholder","length","onCancel"],"sources":["C:/Users/Administrator/Desktop/MediReach Final Project/frontend/src/pages/AppointmentsPage.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { io } from 'socket.io-client';\r\nimport AppointmentCard from '../components/AppointmentCard';\r\nimport NewAppointmentForm from '../components/NewAppointmentForm';\r\n\r\nexport default function AppointmentsPage() {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [filter, setFilter] = useState('All');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Load appointments from backend\r\n  useEffect(() => {\r\n    axios.get('http://localhost:5000/api/appointments')\r\n      .then(res => setAppointments(res.data))\r\n      .catch(err => console.error('Fetch error:', err))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  // Listen for real-time updates\r\n  useEffect(() => {\r\n    const socket = io('http://localhost:5000');\r\n\r\n    socket.on('appointmentAdded', (newAppt) => {\r\n      setAppointments(prev => [...prev, newAppt]);\r\n    });\r\n\r\n    socket.on('appointmentCancelled', (updatedAppt) => {\r\n      setAppointments(prev =>\r\n        prev.map(appt => appt._id === updatedAppt._id ? updatedAppt : appt)\r\n      );\r\n    });\r\n\r\n    return () => socket.disconnect();\r\n  }, []);\r\n\r\n  const addAppointment = (newAppt) => {\r\n    axios.post('http://localhost:5000/api/appointments', newAppt)\r\n      .then(res => setAppointments(prev => [...prev, res.data]))\r\n      .catch(err => console.error('Add error:', err));\r\n  };\r\n\r\n  const cancelAppointment = (id) => {\r\n    axios.patch(`http://localhost:5000/api/appointments/${id}/cancel`)\r\n      .then(res => {\r\n        setAppointments(prev =>\r\n          prev.map(appt => appt._id === id ? res.data : appt)\r\n        );\r\n      })\r\n      .catch(err => console.error('Cancel error:', err));\r\n  };\r\n\r\n  const filteredAppointments = appointments\r\n    .filter(appt =>\r\n      (filter === 'All' || appt.status === filter) &&\r\n      appt.patient.toLowerCase().includes(searchTerm.toLowerCase())\r\n    )\r\n    .sort((a, b) => {\r\n      const dateA = new Date(`${a.date}T${a.time}`);\r\n      const dateB = new Date(`${b.date}T${b.time}`);\r\n      return dateA - dateB;\r\n    });\r\n\r\n  return (\r\n    <div>\r\n      <h2>Appointments</h2>\r\n      <NewAppointmentForm onAdd={addAppointment} />\r\n\r\n      <div style={{ marginBottom: '1rem' }}>\r\n        <label>Search by patient name: </label>\r\n        <input\r\n          type=\"text\"\r\n          value={searchTerm}\r\n          onChange={e => setSearchTerm(e.target.value)}\r\n          placeholder=\"e.g. Jane Doe\"\r\n        />\r\n      </div>\r\n\r\n      <div style={{ marginBottom: '1rem' }}>\r\n        <label>Filter by status: </label>\r\n        <select value={filter} onChange={e => setFilter(e.target.value)}>\r\n          <option>All</option>\r\n          <option>Confirmed</option>\r\n          <option>Pending</option>\r\n          <option>Completed</option>\r\n          <option>Cancelled</option>\r\n        </select>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <p>Loading appointments...</p>\r\n      ) : filteredAppointments.length === 0 ? (\r\n        <p>No appointments found.</p>\r\n      ) : (\r\n        filteredAppointments.map(appt => (\r\n          <AppointmentCard\r\n            key={appt._id}\r\n            patient={appt.patient}\r\n            date={appt.date}\r\n            time={appt.time}\r\n            status={appt.status}\r\n            onCancel={() => cancelAppointment(appt._id)}\r\n          />\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}